const __vite__fileDeps=["assets/AboutView-CIItRQmh.js","assets/loglevel-B2dhcVwj.js","assets/vue-bkblnezT.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
var be=Object.defineProperty;var Le=(o,e,t)=>e in o?be(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var re=(o,e,t)=>(Le(o,typeof e!="symbol"?e+"":e,t),t),le=(o,e,t)=>{if(!e.has(o))throw TypeError("Cannot "+t)};var $=(o,e,t)=>(le(o,e,"read from private field"),t?t.call(o):e.get(o)),F=(o,e,t)=>{if(e.has(o))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(o):e.set(o,t)},G=(o,e,t,n)=>(le(o,e,"write to private field"),n?n.call(o,t):e.set(o,t),t);import{O as Ee,Z as ke,_ as Ie,r as C,$ as V,f,h as W,G as Se,a0 as $e,j as B,a1 as Ce,E as r,B as Y,a2 as de,a3 as me,q as x,z as h,A as i,u as b,a4 as w,F as X,a5 as Ae,M as je,a6 as T,a7 as Ve,H as U,L as Be,a8 as De,c as ee,a9 as _e,C as Me,aa as Oe,ab as Fe,Q as Te}from"./vue-bkblnezT.js";import{l as p}from"./loglevel-B2dhcVwj.js";import{E as Ne,a as P,b as q,c as te,d as oe,e as Ue,f as Re,g as ne,h as He,i as fe,j as Q,k as y,l as Pe,m as qe}from"./elementui-BF8MIRFg.js";import{a as Z}from"./axios-B4uVmeYG.js";import{H as J}from"./highlight-D-H_nyAe.js";import{M as Ke}from"./markdown-BMSQkwth.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();const g=Ee({dataList:[],showList:[],loadIndex:0,done(){return this.loadIndex>=this.dataList.length},loadMoreData(){for(var o=0;o<10&&o<this.dataList.length-this.loadIndex;o++)this.showList.push(this.dataList[o+this.loadIndex]);this.loadIndex+=o},clearShow(){this.loadIndex=0,this.showList=[]},clearAll(){this.clearShow(),this.dataList=[]},search(o){return this.clearShow(),this.loadIndex=this.dataList.length,this.dataList.forEach(e=>{e.title.toLowerCase().indexOf(o.toLowerCase())>-1&&this.showList.push(e)}),this.showList.length}}),O=(o,e)=>{const t=o.__vccOpts||o;for(const[n,s]of e)t[n]=s;return t},ze={__name:"SearchInput",props:{modelValue:{},modelModifiers:{}},emits:ke(["submit"],["update:modelValue"]),setup(o,{emit:e}){const t=e,n=Ie(o,"modelValue"),s=C(!1);function a(){var l;if(!((l=n.value)!=null&&l.trim())){g.clearShow(),g.loadMoreData();return}t("submit",n.value)}return(l,c)=>{const u=V("Search");return f(),W("div",{class:"myInput",style:Y({width:s.value?"100%":"40%"})},[Se(B("input",{type:"text",onFocus:c[0]||(c[0]=d=>s.value=!0),onBlur:c[1]||(c[1]=d=>s.value=!1),onKeydown:Ce(a,["enter"]),placeholder:"搜索","onUpdate:modelValue":c[2]||(c[2]=d=>n.value=d)},null,544),[[$e,n.value]]),r(u,{onClick:a,style:Y({color:s.value?"red":"black"}),class:"myIcon"},null,8,["style"])],4)}}},Ge=O(ze,[["__scopeId","data-v-784c9a7e"]]),Je={__name:"App",setup(o){const e=de(),t=me();x(()=>e.path);const n=x(()=>!e.path.startsWith("/article/")),s=C(""),a=["HomeView","AboutView"];function l(c){p.debug("执行搜索，参数：",c);const u=g.search(c);t.push("/"),Ne({title:"搜索结果",message:`搜索完毕，共找到${u}条结果！`,type:"success",duration:2e3})}return(c,u)=>{const d=V("HomeFilled"),m=P,k=V("StarFilled"),I=V("InfoFilled"),A=q,K=te,z=oe,v=Ue,_=Re,L=ne;return f(),h(L,{class:"main"},{default:i(()=>[n.value?(f(),h(K,{key:0},{default:i(()=>[r(A,{justify:"center",align:"middle"},{default:i(()=>[r(m,{xs:6,sm:5,md:4,lg:4,xl:4},{default:i(()=>[r(b(T),{class:"link",to:"/"},{default:i(()=>[r(d,{class:"myIcon hidden-xs-only"}),w("主页 ")]),_:1})]),_:1}),r(m,{xs:6,sm:5,md:4,lg:4,xl:4},{default:i(()=>[r(b(T),{class:"link",to:"/fav"},{default:i(()=>[r(k,{class:"myIcon hidden-xs-only"}),w("收藏 ")]),_:1})]),_:1}),r(m,{xs:6,sm:5,md:4,lg:4,xl:4},{default:i(()=>[r(b(T),{class:"link",to:"/about"},{default:i(()=>[r(I,{class:"myIcon hidden-xs-only"}),w("关于 ")]),_:1})]),_:1}),r(m,{span:3,class:"search hidden-xs-only"},{default:i(()=>[r(Ge,{onSubmit:l,modelValue:s.value,"onUpdate:modelValue":u[0]||(u[0]=S=>s.value=S)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})):X("",!0),r(z,{style:Y({height:n.value?"calc(100% - 56px)":"100%"})},{default:i(()=>[r(A,{justify:"center"},{default:i(()=>[r(m,{span:24},{default:i(()=>[r(b(Ve),null,{default:i(({Component:S})=>[(f(),h(Ae,{include:a},[(f(),h(je(S)))],1024))]),_:1})]),_:1})]),_:1})]),_:1},8,["style"]),r(v,null,{default:i(()=>[r(A,{justify:"center"},{default:i(()=>[r(m,{span:24})]),_:1})]),_:1}),r(_)]),_:1})}}},We=O(Je,[["__scopeId","data-v-43734fa8"]]),Ye="modulepreload",Qe=function(o){return"/"+o},ce={},Ze=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.all(t.map(c=>{if(c=Qe(c),c in ce)return;ce[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":Ye,u||(m.as="script",m.crossOrigin=""),m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),u)return new Promise((k,I)=>{m.addEventListener("load",k),m.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${c}`)))})}))}return s.then(()=>e()).catch(a=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a})},pe="",Xe=["src"],et={__name:"ListItem",props:["data","index"],setup(o){return(e,t)=>{const n=te,s=oe,a=ne,l=He;return f(),h(a,{class:"itemList"},{default:i(()=>[r(a,null,{default:i(()=>[r(n,{class:"title"},{default:i(()=>[r(b(T),{to:"/article/"+encodeURIComponent(o.data.fileName)},{default:i(()=>[w(U(o.data.title),1)]),_:1},8,["to"])]),_:1}),r(s,{class:"abstract"},{default:i(()=>[w(U(o.data.abstract),1)]),_:1})]),_:1}),o.data.picUrl?(f(),h(l,{key:0,class:"imgBox"},{default:i(()=>[B("img",{src:b(pe)+o.data.picUrl},null,8,Xe)]),_:1})):X("",!0)]),_:1})}}},tt=O(et,[["__scopeId","data-v-42ed6154"]]),ot={key:0,class:"loadBox"},nt={__name:"ListContainer",props:["listData","done"],setup(o){return(e,t)=>{const n=fe,s=P,a=q;return f(),h(a,{justify:"center"},{default:i(()=>[r(s,null,{default:i(()=>[(f(!0),W(Be,null,De(o.listData,(l,c)=>(f(),h(tt,{index:c,data:l,key:l.id},null,8,["index","data"]))),128)),o.done?X("",!0):(f(),W("div",ot,[r(n,{type:"primary",style:{margin:"0 auto"},onClick:t[0]||(t[0]=l=>b(g).loadMoreData())},{default:i(()=>[w("加载更多...")]),_:1})]))]),_:1})]),_:1})}}},he=O(nt,[["__scopeId","data-v-b47842b7"]]),st={__name:"HomeView",setup(o){const e=x(()=>g.done());return ee(()=>{if(p.debug("挂载组件HomeView"),g.dataList.length>0)return;const t=Q.service({lock:!0,text:"请稍等，正在载入内容..."});Z.get(`${pe}/dataList.json`,{responseType:"json"}).then(({data:n})=>{n.files.sort(()=>Math.random()-.5),n.files.forEach(s=>g.dataList.push(s)),g.loadMoreData()}).catch(n=>{p.error(n),y.error("抱歉，请求数据时出现异常问题！")}).finally(()=>{t.close()})}),_e(()=>{p.debug("卸载组件HomeView")}),(t,n)=>{const s=P,a=q;return f(),h(a,{justify:"center"},{default:i(()=>[r(s,{xs:24,sm:20,md:12,lg:12,xl:12},{default:i(()=>[r(he,{listData:b(g).showList,done:e.value},null,8,["listData","done"])]),_:1})]),_:1})}}},N=p.getLogger("Database.js");N.setLevel(p.levels.DEBUG);class at{constructor(){re(this,"onsuccess",()=>{})}insert(e,t,n,s){throw new j("请实现insert方法！")}update(e,t,n,s,a,l){throw new j("请实现update方法！")}delete(e,t,n,s){throw new j("请实现delete方法！")}select(e,t,n,s){throw new j("请实现search方法！")}}var H,E,M;const D=class D extends at{constructor(t){super();F(this,E,null);F(this,M,null);if(!t)throw new j("请指定indexedDB数据库名称！");G(this,M,t);const n=window.indexedDB.open($(this,M),$(D,H));n.onsuccess=s=>{G(this,E,s.target.result),N.debug("indexedDB 打开数据库成功！"),this.onsuccess&&this.onsuccess()},n.onerror=function(s){N.error("indexedDB 发生错误！",s)},n.onupgradeneeded=function(s){N.info(`indexedDB 触发版本号升级！版本号变化：${s.oldVersion}-->${s.newVersion}`,s);const a=this.result;if(!a.objectStoreNames.contains("markdown")){const c=a.createObjectStore("markdown",{keyPath:"id",autoIncrement:!0});D.createIndex(c,"fileName",!0)}}}insert(t,n,s,a){const u=$(this,E).transaction(t,"readwrite").objectStore(t).add(n);u.onsuccess=d=>s(d.target.result)||function(){console.log(`表 ${t} 成功插入数据 ${JSON.stringify(n)} ！`)},u.onerror=a||function(){console.log(`表 ${t} 插入数据 ${JSON.stringify(n)} 失败！`)}}select(t,n,s,a){const c=$(this,E).transaction(t,"readonly").objectStore(t);let u=null;n?u=c.index(`${n.name}_idx`).get(n.value):u=c.getAll(),u.onsuccess=function(){s(this.result)},u.onerror=a||function(d){console.log(`表 ${t} 查询数据 ${name} 出现异常！`,d)}}delete(t,n,s,a){const u=$(this,E).transaction(t,"readwrite").objectStore(t).delete(n);u.onsuccess=s||function(d){console.log(`表 ${t} 删除数据 ${n} 成功！`)},u.onerror=a||function(d){console.log(`表 ${t} 删除数据 ${n} 出现异常！`,d)}}static createIndex(t,n,s=!1){t.createIndex(`${n}_idx`,n,{unique:s})}};H=new WeakMap,E=new WeakMap,M=new WeakMap,F(D,H,1);let R=D;class j extends Error{constructor(e){super(e)}}const rt="$$$",lt=":",ie=["title","date","abstract","pic"],ue=Ke({highlight:(o,e)=>e&&J.getLanguage(e)?J.highlight(o,{language:e}).value:J.highlightAuto(o).value});function ct(o){const e={meta:{},content:"",custom:!1};if(!o)return e;const t=o.split(`
`),n=ve(t);return n.end>=0?(e.custom=!0,e.meta=it(t,n),e.content=ue.render(t.slice(n.end+1).join(`
`)),e):(e.custom=!1,e.content=ue.render(o),e)}function ve(o){const e={start:-1,end:-1},t=o.length;for(let n=0;n<t;n++)if(o[n].trim()===rt)if(e.start<0)e.start=n;else{e.end=n;break}return e}function it(o,e){const t={};return ie.forEach(s=>t[s]=null),e.end<0||o.slice(e.start+1,e.end).forEach(function(s){const a=s.split(lt).map(l=>l.trim());ie.findIndex(l=>l===a[0])>-1&&(t[a[0]]=a[1])}),t}function ut(o){const e=o.split(`
`),t=ve(e);return t.end>-1?e.slice(t.end+1).join(`
`):o}function dt(o,e){const t=window.URL.createObjectURL(o),n=document.createElement("a");n.href=t,n.download=e,n.click(),window.URL.revokeObjectURL(t)}function mt(o,e){dt(new Blob([o]),e)}const _t={class:"tool"},ft=["innerHTML"],pt={__name:"ArticleView",setup(o){const e=new R("STATIC_BLOG"),t=C(null),n=x(()=>t.value!==null),s=x(()=>n.value?"StarFilled":"Star"),a=de(),l=me(),c=x(()=>a.params.fileName),u=C({}),d=x(()=>u.value.title||a.params.fileName),m=x(()=>u.value.date),k=C(""),I=`/doc/${encodeURIComponent(c.value+".md")}`;ee(()=>{const v=Q.service({lock:!0,text:"请稍等，正在载入内容..."});Z({method:"get",url:I,responseType:"text"}).then(({data:_})=>{const L=ct(_);L.custom&&(u.value=L.meta),k.value=L.content}).catch(_=>{y({type:"error",message:"抱歉，请求数据时出现异常问题！",showClose:!0,duration:1e3}),p.error(_)}).finally(()=>{v.close()}),e.onsuccess=function(){this.select("markdown",{name:"fileName",value:c.value},_=>{t.value=_?_.id:null,p.debug("获得数据库查询结果：",_)})}});function A(){l.back()}function K(){if(n.value){e.delete("markdown",t.value,()=>{t.value=null,y({type:"success",message:"您已经取消收藏！",showClose:!0,duration:1e3})},()=>{y({type:"error",message:"抱歉，出现问题，取消收藏失败！",showClose:!0,duration:1e3})});return}e.insert("markdown",{fileName:`${c.value}`,title:d.value,date:new Date},v=>{t.value=v,p.debug("插入数据id=",v),y({type:"success",message:"您已经成功收藏！",showClose:!0,duration:1e3})},()=>{y({type:"error",message:"抱歉，收藏文章出现问题，该操作未成功执行！",showClose:!0,duration:1e3})})}function z(){const v=Q.service({lock:!0,text:"请稍等，正在下载内容..."});Z({method:"get",url:I+"?r="+Math.random(),responseType:"text"}).then(({data:_})=>{mt(ut(_),`${c.value}.md`)}).catch(_=>{y({type:"error",message:"抱歉，请求下载数据时出现异常问题！",showClose:!0,duration:1e3}),console.error(_)}).finally(()=>{v.close()})}return(v,_)=>{const L=V("Back"),S=Pe,we=te,ae=fe,ye=oe,xe=ne;return f(),h(xe,{class:"myContainer"},{default:i(()=>[r(we,{class:"title"},{default:i(()=>[r(L,{class:"myIcon",onClick:A}),r(S,{direction:"vertical"}),w(U(d.value),1)]),_:1}),r(S),r(ye,null,{default:i(()=>[B("div",_t,[r(ae,{plain:"",icon:s.value,size:"small",class:Me({havFav:n.value}),onClick:K},{default:i(()=>[w("收藏")]),_:1},8,["icon","class"]),r(ae,{plain:"",icon:"Download",size:"small",onClick:z},{default:i(()=>[w("下载")]),_:1})]),B("div",{class:"myTable mdCode",innerHTML:k.value},null,8,ft),B("p",null,"创作日期："+U(m.value),1)]),_:1})]),_:1})}}},ht=O(pt,[["__scopeId","data-v-b910f6dc"]]),vt={__name:"FavView",setup(o){const e=new R("STATIC_BLOG"),t=C([]);return ee(()=>{p.debug("挂载FavView"),e.onsuccess=function(){this.select("markdown",null,n=>{n.forEach(s=>{t.value.push({title:s.title,fileName:s.fileName,id:s.id})})},()=>{y.error("抱歉，获取收藏列表出现异常问题！")})}}),_e(()=>{p.debug("卸载FavView")}),(n,s)=>{const a=he,l=P,c=q;return f(),h(c,{justify:"center"},{default:i(()=>[r(l,{xs:24,sm:18,md:12,lg:12,xl:12},{default:i(()=>[r(a,{listData:t.value,done:!0},null,8,["listData"])]),_:1})]),_:1})}}},ge=Oe({history:Fe("/"),linkExactActiveClass:"active",routes:[{path:"/",name:"home",component:st},{path:"/about",name:"about",component:()=>Ze(()=>import("./AboutView-CIItRQmh.js"),__vite__mapDeps([0,1,2]))},{path:"/article/:fileName",name:"article",component:ht},{path:"/fav",name:"fav",component:vt}]});ge.afterEach((o,e)=>{});p.setLevel(p.levels.DEBUG);const se=Te(We);for(const[o,e]of Object.entries(qe))se.component(o,e);se.use(ge);se.mount("#app");
